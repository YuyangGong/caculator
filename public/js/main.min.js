/*! A simple caculator created by yuyang */
!function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(module,exports,__webpack_require__){"use strict";function caculate(str){function innerCaculate(str){var ori=str,index=0,res;if(str=str.replace(/\s/g,""),!str)throw new Error("并没有输入任何有意义的运算");if(/[^\w+\-*\/()π^%,\.]/.test(str))throw new Error("包含非法字符~");if(str=str.replace(/(\b[a-z_]\w*\b|\Bπ\B)(?!\()/gi,function(t){if(replaceMethods[t]){if(replaceMethods[t]&&"number"!=typeof replaceMethods[t])throw new Error("不能把方法: "+t+" 当常量用");return replaceMethods[t]}throw new Error("不存在的常量名: "+t)}),str=str.replace(/\b(\d(?:\.\d*)?)\^((\d(?:\.\d*)?))\b/,function(t,e,r){return Math.pow(e,r)}),/\^/.test(str))throw new Error("错误的使用: ^幂运算符");for(;/\b([a-z_]\w*)?\([^(]*?\)/i.test(str);)str=str.replace(/\b([a-z_]\w*)?\(([^(]*?)\)/i,function(){var res=void 0,method=arguments.length<=1?void 0:arguments[1];if(void 0===method)try{res=eval(arguments.length<=0?void 0:arguments[0])}catch(t){throw new Error("不正确的算术格式~")}else{var usage=replaceMethods[method];if(!usage)throw new Error("不存在的方法名: "+method);if(usage instanceof Function)try{res=eval("replaceMethods."+(arguments.length<=1?void 0:arguments[1])+"("+(arguments.length<=2?void 0:arguments[2])+")")}catch(t){throw t.message.indexOf("传入")>-1?t:new Error("不正确的算术格式~")}else if("number"==typeof usage)throw new Error("不能将常量 "+method+" 当方法用")}return res});try{res=eval(str)}catch(t){throw new Error("不正确的算术格式~")}return res}var result;try{result=innerCaculate(str)}catch(t){return t.message}return+result.toFixed(15)}var status={isAngle:!0,argModel:0,allowVar:!1},util={avg:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return util.sum.apply(null,e)/e.length},cot:function(t){return Math.cos(t)/Math.sin(t)},log:function(t,e){return Math.log(t)/Math.log(e)},log10:function(t){return util.log(t,10)},acosh:Math.acosh||function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:Math.asinh||function(t){return t===-(1/0)?t:Math.log(t+Math.sqrt(t*t+1))},atanh:Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},cbrt:Math.cbrt||function(t){return Math.pow(t,1/3)},sum:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce(function(t,e){return t+e},0)},pow:Math.pow,fac:function(t){return new Array(t+1).join("1").split("").reduce(function(t,e,r){return t*(r+1)},1)},HCF:function t(e,r){return e%r?t(r,e%r):r},angle2rad:function(t){return 2*t*Math.PI/360},rad2angle:function(t){return 180*t/Math.PI}},replaceMethods={abs:Math.abs,avg:util.avg,sin:Math.sin,cos:Math.cos,tan:Math.tan,cot:util.cot,acos:Math.acos,acosh:util.acosh,asin:Math.asin,atan:Math.atan,asinh:util.asinh,atanh:util.atanh,atan2:Math.atan2,logMutil:util.log,cbrt:util.cbrt,sum:util.sum,pow:util.pow,fac:util.fac,HCF:util.HCF,log:util.log10,ln:Math.log,e:Math.E,"π":Math.PI};["sin","cos","tan","cot","acos","acosh","asin","atan","asinh","atanh","atan2"].map(function(t){var e=replaceMethods[t];replaceMethods[t]=function(t){return e(status.isAngle?util.angle2rad(t):t)}});var argNum={abs:1,avg:2,sin:1,cos:1,tan:1,cot:1,acos:1,acosh:1,asin:1,atan:1,asinh:1,atanh:1,atan2:1,log:1,ln:1,logMutil:2,cbrt:1,sum:2,pow:2,fac:1,HCF:2},validVarible=function(t,e){return/^[a-z_]\w*$/i.test(t)&&/\d+(\.\d+)?/.test(e)?!replaceMethods[t]||"已经有同名常量或方法存在":/^[a-z_]\w*$/i.test(t)?"常量值不是数字！":"不合法的常量名"},createVarible=function(t,e){return replaceMethods[t]=+e},validMethod=function(t,e){if(/^[a-z_]\w*$/i.test(t)){if(replaceMethods[t])return"已经有同名常量或方法存在";var r=caculate(e.replace(/\s/g,"").replace(/\b[a-z_]\w*(?!\(|\w)/g,function(t){return replaceMethods[t]?replaceMethods[t]:1}));return"number"==typeof r||r}return"不合法的方法名"},createMethod=function(t,e){function r(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return console.log(e.replace(RegExp("\\b("+n.join("|")+")\\b","g"),function(t){return r[n.indexOf(t)]||t})),e.replace(RegExp("\\b("+n.join("|")+")\\b","g"),function(t){return r[n.indexOf(t)]||t})}var n=[];e=e.replace(/\s/g,"").replace(/\b[a-z_]\w*(?!\(|\w)/g,function(t){return replaceMethods[t]?replaceMethods[t]:(n.indexOf(t)===-1&&n.push(t),t)}),argNum[t]=n.length,replaceMethods[t]=bindArgNum(r,n.length,t)},bindArgNum=function(t,e,r){return function(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];if(a.length<e)throw new Error("传入"+r+"方法的参数过少");if(!(a.length>e))return t.apply(null,a);if(0===status.argModel)return t.apply(null,a);if(1===status.argModel)throw new Error("传入${name}方法的参数过多")}};for(var key in argNum)replaceMethods[key]=bindArgNum(replaceMethods[key],argNum[key],key);caculate.create={validMethod:validMethod,createMethod:createMethod,validVarible:validVarible,createVarible:createVarible},caculate.changeModel={changeArgModel:function(){return status.argModel=+!status.argModel},changeIsAngle:function(){return status.isAngle=!status.isAngle},changeAllowVar:function(){return status.allowVar=!status.allowVar}},module.exports=caculate},function(t,e,r){"use strict";function n(t,e){var r,n=i(t.val());"number"==typeof n?(r=!0,n=n!==n?"运算结果为: NaN, 无意义的运算":/Infinity/.test(n.toString())?"无穷："+n.toString().replace(/Infinity/,"n"):"您的运算结果为："+n):r=!1,u(e,r,n)}function a(t,e){var r=t.eq(0).val(),n=t.eq(1).val(),a=l.validVarible(r,n);"string"!=typeof a?(l.createVarible(r,n),u(e,!0,"创建成功！常量名:"+r+" 常量值:"+n)):u(e,!1,a)}function o(t,e){var r=t.eq(0).val(),n=t.eq(1).val(),a=l.validMethod(r,n);"string"!=typeof a?(l.createMethod(r,n),u(e,!0,"创建成功！常量名:"+r+" 常量值:"+n)):u(e,!1,a)}function u(t,e,r){e?t.removeClass("error").addClass("correct"):t.removeClass("correct").addClass("error"),t.text(r).slideDown("slow")}function s(t){var e=t.parent(),r=t.siblings("input"),u=t.siblings(".result");e.hasClass("content")?n(r,u):e.hasClass("constant")?a(r,u):o(r,u)}var i=r(0),l=i.create;$("button").click(function(){s($(this))}),$("input").keyup(function(t){13===t.keyCode?s($(this).parent().find("button")):$(".result").slideUp("slow")}),$("input").click(function(){$(".result").slideUp("slow")})}]);
//# sourceMappingURL=main.min.js.map